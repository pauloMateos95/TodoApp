(this["webpackJsonpto-do-app"]=this["webpackJsonpto-do-app"]||[]).push([[0],{109:function(e,t,n){},111:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(1),r=n(19),o=n.n(r),s=n(7),i=n(17),u=n(6),l=n(10),j=n.n(l),d=n(9),b=n.n(d),m=n(16),p="https://mern-todo-paulo.herokuapp.com/api",O=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(p,"/").concat(e);return"GET"===n?fetch(a):fetch(a,{method:n,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},f=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(p,"/").concat(e),c=localStorage.getItem("token")||"";return"GET"===n?fetch(a,{method:n,headers:{"x-token":c}}):fetch(a,{method:n,headers:{"Content-type":"application/json","x-token":c},body:JSON.stringify(t)})},h="[ui] Open modal",v="[ui] Close modal",x="[todo] Add new",g="[todo] Delete",w="[todo] toggle",N="[event] Events loaded",k="[auth] Finish checking",y="[auth] Login",E="[auth] Logout",S=function(){return{type:k}},C=function(e){return{type:y,payload:e}},P=function(){return{type:E}},T=n(15),D=n(21),A=n(4),I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(c.useState)(e),n=Object(T.a)(t,2),a=n[0],r=n[1],o=function(){r(e)},s=function(e){var t=e.target;r(Object(A.a)(Object(A.a)({},a),{},Object(D.a)({},t.name,t.value)))};return[a,s,o]},_=(n(45),function(){var e=Object(s.b)(),t=I({lEmail:"paulo@gmail.com",lPassword:"123456"}),n=Object(T.a)(t,2),c=n[0],r=n[1],o=c.lEmail,u=c.lPassword;return Object(a.jsx)("div",{className:"container login-container",children:Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("div",{className:"col-md-6 login-form-1",children:[Object(a.jsx)("h3",{children:"Sign In"}),Object(a.jsxs)("form",{onSubmit:function(t){var n,a;t.preventDefault(),e((n=o,a=u,function(){var e=Object(m.a)(b.a.mark((function e(t){var c,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("auth",{email:n,password:a},"POST");case 2:return c=e.sent,e.next=5,c.json();case 5:(r=e.sent).ok?(localStorage.setItem("token",r.token),localStorage.setItem("token-init-date",(new Date).getTime()),t(C({uid:r.uid,name:r.name}))):j.a.fire("Error",r.msg,"error");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"Email",name:"lEmail",value:o,onChange:r})}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{type:"password",className:"form-control",placeholder:"Password",name:"lPassword",value:u,onChange:r})}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{type:"submit",className:"btnSubmit",value:"Login"})}),Object(a.jsx)(i.b,{to:"/register",children:"Create new account"})]})]})})})}),L=function(){var e=Object(s.b)(),t=I({rName:"Ceci",rEmail:"ceci@gmail.com",rPassword:"123456",rPassword2:"123456"}),n=Object(T.a)(t,2),c=n[0],r=n[1],o=c.rName,u=c.rEmail,l=c.rPassword,d=c.rPassword2;return Object(a.jsx)("div",{className:"container login-container",children:Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("div",{className:"col-md-6 login-form-2",children:[Object(a.jsx)("h3",{children:"Sign up"}),Object(a.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),l!==d)return j.a.fire("Error","Passwords should match","error");var n,a,c;e((n=u,a=l,c=o,function(){var e=Object(m.a)(b.a.mark((function e(t){var r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("auth/new",{email:n,password:a,name:c},"POST");case 2:return r=e.sent,e.next=5,r.json();case 5:(o=e.sent).ok?(localStorage.setItem("token",o.token),localStorage.setItem("token-init-date",(new Date).getTime()),t(C({uid:o.uid,name:o.name}))):j.a.fire("Error",o.msg,"error");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"Name",name:"rName",value:o,onChange:r})}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{type:"email",className:"form-control",placeholder:"Email",name:"rEmail",value:u,onChange:r})}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{type:"password",className:"form-control",placeholder:"Password",name:"rPassword",value:l,onChange:r})}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{type:"password",className:"form-control",placeholder:"Confirm password",name:"rPassword2",value:d,onChange:r})}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{type:"submit",className:"btnSubmit",value:"Create account"})}),Object(a.jsx)(i.b,{to:"/login",className:"link",children:"Already have an account?"})]})]})})})},G=function(){var e=Object(s.c)((function(e){return e.auth})).name,t=Object(s.b)();return Object(a.jsxs)("div",{className:"navbar navbar-dark bg-dark mb-4",children:[Object(a.jsx)("span",{className:"navbar-brand",children:e}),Object(a.jsxs)("button",{className:"btn btn-outline-danger",onClick:function(){t((function(e){localStorage.clear(),e(P())}))},children:[Object(a.jsx)("i",{className:"fas fa-sign-out-alt"}),Object(a.jsx)("span",{children:" Salir"})]})]})},J=(n(71),n(41)),R=n.n(J),B=n(54),U=n.n(B),X=n(26),q=n.n(X),F=function(e){return e.map((function(e){return Object(A.a)(Object(A.a)({},e),{},{date:q()(e.date).toString()})}))},H=function(e){return e.date=q()(e.date).toString(),Object(A.a)({},e)},M=function(e){return{type:N,payload:e}},V=function(e){return{type:x,payload:e}},W=function(e){return{type:g,payload:e}},z=function(e){return{type:w,payload:e}},K=(n(109),{content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}});R.a.setAppElement("#root");var Q=q()().minutes(0).seconds(0).add(1,"hours"),Y={title:"",date:Q.toDate(),done:!1},Z=function(){var e=Object(s.c)((function(e){return e.ui})).modalOpen,t=Object(s.b)(),n=Object(c.useState)(Q.toDate()),r=Object(T.a)(n,2),o=r[0],i=r[1],u=Object(c.useState)(!0),l=Object(T.a)(u,2),j=l[0],d=l[1],p=Object(c.useState)(Y),O=Object(T.a)(p,2),h=O[0],x=O[1],g=h.title,w=function(){t({type:v}),x(Y)};return Object(a.jsxs)(R.a,{isOpen:e,onRequestClose:w,style:K,className:"modal",overlayClassName:"modal-fondo",children:[Object(a.jsx)("h1",{children:" New task "}),Object(a.jsx)("hr",{}),Object(a.jsxs)("form",{className:"container",onSubmit:function(e){if(e.preventDefault(),g.trim().length<1)return d(!1);var n;t((n=h,function(){var e=Object(m.a)(b.a.mark((function e(t,a){var c,r,o,s,i,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=a().auth,r=c.uid,o=c.name,e.prev=1,e.next=4,f("events",n,"Post");case 4:return s=e.sent,e.next=7,s.json();case 7:i=e.sent,u=H(i.event),i.ok&&(n.id=u.id,n.user={_id:r,name:o},n.date=u.date,t(V(n))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}())),d(!0),w()},children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Task due date"}),Object(a.jsx)(U.a,{onChange:function(e){i(e),x(Object(A.a)(Object(A.a)({},h),{},{date:e}))},value:o,className:"form-control"})]}),Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Task"}),Object(a.jsx)("input",{type:"text",className:"form-control ".concat(!j&&"is-invalid"),placeholder:"Title",name:"title",autoComplete:"off",value:g,onChange:function(e){var t=e.target;x(Object(A.a)(Object(A.a)({},h),{},Object(D.a)({},t.name,t.value)))}}),Object(a.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"Una descripci\xf3n corta"})]}),Object(a.jsxs)("button",{type:"submit",className:"btn btn-outline-primary btn-block",children:[Object(a.jsx)("i",{className:"far fa-save"}),Object(a.jsx)("span",{children:" Save"})]})]})]})},$=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.todo})).todos,n=Object(s.c)((function(e){return e.auth})).uid;Object(c.useEffect)((function(){e(function(){var e=Object(m.a)(b.a.mark((function e(t){var n,a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("events");case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,c=F(a.events),t(M(c)),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())}),[e]);var r=function(t){var n;e((n=t,function(){var e=Object(m.a)(b.a.mark((function e(t){var a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("events/".concat(n.id),n,"DELETE");case 3:return a=e.sent,e.next=6,a.json();case 6:(c=e.sent).ok?t(W(n)):j.a.fire("Error",c.msg,"error"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()))},o=function(t){var n;t.done=!t.done,e((n=t,function(){var e=Object(m.a)(b.a.mark((function e(t){var a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("events/".concat(n.id),n,"PUT");case 3:return a=e.sent,e.next=6,a.json();case 6:(c=e.sent).ok?t(z(n)):j.a.fire("Error",c.msg,"error"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()))};return Object(a.jsxs)("div",{children:[Object(a.jsx)(G,{}),Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("div",{className:"row justify-content-center",children:Object(a.jsx)("h1",{children:"To do List"})}),Object(a.jsx)("div",{className:"row justify-content-center py-3",children:Object(a.jsx)("button",{onClick:function(){e({type:h})},className:"btn btn-success",children:"Add new task"})}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)("ul",{className:"list-group list-group-flush",children:t.map((function(e){return n===e.user._id&&Object(a.jsxs)("li",{className:"list-group-item",children:[Object(a.jsxs)("p",{className:"".concat(e.done&&"complete"),onClick:function(){return o(e)},children:[Object(a.jsx)("strong",{children:"Task: "})," ",e.title]}),Object(a.jsxs)("p",{className:"".concat(e.done&&"complete"),onClick:function(){return o(e)},children:[Object(a.jsx)("strong",{children:"Due date: "})," ",e.date]}),Object(a.jsx)("button",{onClick:function(){return r(e)},className:"btn btn-danger",children:"Delete"})]},e.id)}))})})})]}),Object(a.jsx)(Z,{})]})},ee=n(31),te=function(e){var t=e.isAuthenticated,n=e.component,c=Object(ee.a)(e,["isAuthenticated","component"]);return Object(a.jsx)(u.b,Object(A.a)(Object(A.a)({},c),{},{component:function(e){return t?Object(a.jsx)(n,Object(A.a)({},e)):Object(a.jsx)(u.a,{to:"/login"})}}))},ne=function(e){var t=e.isAuthenticated,n=e.component,c=Object(ee.a)(e,["isAuthenticated","component"]);return Object(a.jsx)(u.b,Object(A.a)(Object(A.a)({},c),{},{component:function(e){return t?Object(a.jsx)(u.a,{to:"/"}):Object(a.jsx)(n,Object(A.a)({},e))}}))},ae=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.auth})),n=t.checking,r=t.uid;return Object(c.useEffect)((function(){e(function(){var e=Object(m.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("auth/renew");case 2:return n=e.sent,e.next=5,n.json();case 5:(a=e.sent).ok?(localStorage.setItem("token",a.token),localStorage.setItem("token-init-date",(new Date).getTime()),t(C({uid:a.uid,name:a.name}))):(j.a.fire("Error",a.msg,"error"),t(S()));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),n&&j.a.fire({title:"Loading...",text:"Please Wait",allowOutsideClick:!1,showCancelButton:!1,showConfirmButton:!1,willOpen:function(){j.a.showLoading()}}),n||j.a.close(),Object(a.jsx)(i.a,{children:Object(a.jsx)("div",{children:Object(a.jsxs)(u.d,{children:[Object(a.jsx)(ne,{exact:!0,path:"/login",component:_,isAuthenticated:!!r}),Object(a.jsx)(ne,{exact:!0,path:"/Register",component:L,isAuthenticated:!!r}),Object(a.jsx)(te,{exact:!0,path:"/",component:$,isAuthenticated:!!r}),Object(a.jsx)(u.a,{to:"/"})]})})})},ce=n(18),re=n(55),oe={checking:!0},se=n(43),ie={modalOpen:!1},ue=Object(ce.c)({ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(A.a)(Object(A.a)({},e),{},{modalOpen:!0});case v:return Object(A.a)(Object(A.a)({},e),{},{modalOpen:!1});default:return e}},todo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{todos:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(A.a)(Object(A.a)({},e),{},{todos:[].concat(Object(se.a)(e.todos),[t.payload])});case g:return Object(A.a)(Object(A.a)({},e),{},{todos:e.todos.filter((function(e){return e.id!==t.payload.id}))});case w:return Object(A.a)({},e);case N:return Object(A.a)(Object(A.a)({},e),{},{todos:Object(se.a)(t.payload)});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(A.a)(Object(A.a)(Object(A.a)({},e),t.payload),{},{checking:!1});case k:return Object(A.a)(Object(A.a)({},e),{},{checking:!1});case E:return{checking:!1};default:return e}}}),le="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ce.d,je=Object(ce.e)(ue,le(Object(ce.a)(re.a))),de=function(){return Object(a.jsx)(s.a,{store:je,children:Object(a.jsx)(ae,{})})};o.a.render(Object(a.jsx)(de,{}),document.getElementById("root"))},45:function(e,t,n){},71:function(e,t,n){}},[[111,1,2]]]);
//# sourceMappingURL=main.8f76c416.chunk.js.map